import{t as j,v as k,w as E}from"./client-DJ4wINi5.js";function S(a){return{onFetch:(e,t)=>{const s=async()=>{var p,y,h,v,w;const o=e.options,u=(h=(y=(p=e.fetchOptions)==null?void 0:p.meta)==null?void 0:y.fetchMore)==null?void 0:h.direction,P=((v=e.state.data)==null?void 0:v.pages)||[],d=((w=e.state.data)==null?void 0:w.pageParams)||[],K={pages:[],pageParams:[]};let f=!1;const N=r=>{Object.defineProperty(r,"signal",{enumerable:!0,get:()=>(e.signal.aborted?f=!0:e.signal.addEventListener("abort",()=>{f=!0}),e.signal)})},O=j(e.options,e.fetchOptions),c=async(r,n,i)=>{if(f)return Promise.reject();if(n==null&&r.pages.length)return Promise.resolve(r);const l={queryKey:e.queryKey,pageParam:n,direction:i?"backward":"forward",meta:e.options.meta};N(l);const T=await O(l),{maxPages:F}=e.options,b=i?k:E;return{pages:b(r.pages,T,F),pageParams:b(r.pageParams,n,F)}};let g;if(u&&P.length){const r=u==="backward",n=r?q:m,i={pages:P,pageParams:d},l=n(o,i);g=await c(i,l,r)}else{g=await c(K,d[0]??o.initialPageParam);const r=a??P.length;for(let n=1;n<r;n++){const i=m(o,g);g=await c(g,i)}}return g};e.options.persister?e.fetchFn=()=>{var o,u;return(u=(o=e.options).persister)==null?void 0:u.call(o,s,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},t)}:e.fetchFn=s}}}function m(a,{pages:e,pageParams:t}){const s=e.length-1;return a.getNextPageParam(e[s],e,t[s],t)}function q(a,{pages:e,pageParams:t}){var s;return(s=a.getPreviousPageParam)==null?void 0:s.call(a,e[0],e,t[0],t)}function B(a,e){return e?m(a,e)!=null:!1}function C(a,e){return!e||!a.getPreviousPageParam?!1:q(a,e)!=null}export{C as a,B as h,S as i};
